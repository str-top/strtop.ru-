### Отчёт по проверке задания: "Змейка" на Python

---

#### 1. Формулировка задания
**Цель:** Реализовать игру "Змейка" с использованием Pygame.  
**Ключевые требования:**
- Управление змейкой стрелками (вверх/вниз/влево/вправо).
- Змейка растёт при съедании еды.
- Еда появляется в случайных позициях на поле.
- Столкновение с собой приводит к завершению игры.
- Корректное отображение всех элементов (змейка, еда, фон).

**Ограничения:**
- Размер поля: `600x400` пикселей, размер клетки: `20x20`.
- Змейка не должна проходить сквозь стены (в классической версии).
- Игра должна завершаться с сообщением при проигрыше.

---

#### 2. Результаты проверки
**Файл:** `snake.py`  
**Тестирование:**
1. Запуск игры: змейка появляется в центре, движется вправо.
2. Управление стрелками работает, запрещены резкие развороты (например, вниз при движении вверх).
3. При съедании еды змейка растёт, еда появляется в новом месте.
4. **Обнаруженные проблемы:**
   - **Еда на теле змейки:** Еда может появиться внутри змейки (стр. 34-37, метод `generate_position`).
   - **Телепортация через границы:** Змейка выходит за границы экрана и появляется с противоположной стороны (стр. 19, `move` с использованием `%`).
   - **Нет завершения игры:** При столкновении с собой игра закрывается без сообщения (стр. 60-61).
   - **Отсутствие счёта на экране:** Игрок не видит текущий счёт.

---

#### 3. Сильные стороны работы
- **Корректность:** Основная механика работает (движение, рост, съедание еды).
- **Архитектура:** Логичное разделение на классы `Snake` и `Food`.
- **Читаемость:** Код структурирован, константы выделены, названия переменных понятны.
- **Обработка управления:** Правильная проверка направлений (запрет разворота на 180°).

---

#### 4. Ошибки и рекомендации
**Блокирующие:**
1. **Игра завершается без сообщения.**  
   **Как исправить:** Добавить экран с текстом "Game Over" и финальным счётом перед выходом.
   ```python
   font = pygame.font.SysFont(None, 48)
   text = font.render(f"Game Over! Score: {score}", True, WHITE)
   screen.blit(text, (WIDTH // 2 - 150, HEIGHT // 2 - 24))
   pygame.display.update()
   pygame.time.wait(2000)  # Пауза 2 секунды перед закрытием
   ```

**Значимые:**
1. **Еда появляется на теле змейки.**  
   **Как исправить:** В классе `Food` добавить проверку позиции:
   ```python
   def generate_position(self, snake_body):
       while True:
           x = random.randint(0, (WIDTH - CELL_SIZE) // CELL_SIZE) * CELL_SIZE
           y = random.randint(0, (HEIGHT - CELL_SIZE) // CELL_SIZE) * CELL_SIZE
           if (x, y) not in snake_body:
               return (x, y)
   ```
   Вызов: `food.generate_position(snake.body)`.

2. **Змейка не умирает при выходе за границы.**  
   **Как исправить:** В методе `move` заменить телепортацию на проверку границ:
   ```python
   new_head = (head_x + dx, head_y + dy)
   if new_head[0] < 0 or new_head[0] >= WIDTH or new_head[1] < 0 or new_head[1] >= HEIGHT:
       self.collision = True  # Добавить флаг столкновения
   ```

**Минорные:**
1. **Нет отображения счёта.**  
   **Как исправить:** Добавить в игровой цикл отрисовку текста:
   ```python
   font = pygame.font.SysFont(None, 24)
   score_text = font.render(f"Score: {score}", True, WHITE)
   screen.blit(score_text, (10, 10))
   ```

---

#### 5. Оценка
**result: 70/100**  
- **Функциональность (50%): 30/50**  
  Снято за: отсутствие границ (–10), еду на змейке (–5), нет Game Over (–5).
- **Качество кода (30%): 25/30**  
  Снято за: логические ошибки (–5).
- **Стиль и тесты (20%): 15/20**  
  Снято за: отсутствие тестов (–3), можно улучшить комментарии (–2).

---

#### 6. Рекомендации по доработке
**Не реализовано:**
- Экран завершения игры.
- Проверка позиции еды.
- Смерть при выходе за границы.
- Отображение счёта.

**Исправленный код (ключевые фрагменты):**
```python
# В классе Food:
def generate_position(self, snake_body):
    while True:
        x = random.randint(0, (WIDTH - CELL_SIZE) // CELL_SIZE) * CELL_SIZE
        y = random.randint(0, (HEIGHT - CELL_SIZE) // CELL_SIZE) * CELL_SIZE
        if (x, y) not in snake_body:
            return (x, y)

# В методе move класса Snake:
def move(self):
    head_x, head_y = self.body[0]
    dx, dy = self.direction
    new_head = (head_x + dx, head_y + dy)
    if new_head[0] < 0 or new_head[0] >= WIDTH or new_head[1] < 0 or new_head[1] >= HEIGHT:
        raise Exception("Collision with wall")
    self.body.insert(0, new_head)
    self.body.pop()

# В игровом цикле:
try:
    snake.move()
except Exception:
    # Показать Game Over
    font = pygame.font.SysFont(None, 48)
    text = font.render(f"Game Over! Score: {score}", True, WHITE)
    screen.blit(text, (WIDTH // 2 - 150, HEIGHT // 2 - 24))
    pygame.display.update()
    pygame.time.wait(2000)
    pygame.quit()
    sys.exit()
```
