# Практическое задание 2

## Задания

### Описание задачи
Нужно подготовить функцию, формирующую единый словарь запроса к API. Она принимает любое количество именованных аргументов через `**kwargs`, отделяет служебные настройки (`timeout`, `retries`) от полезной нагрузки и проверяет наличие обязательного поля `endpoint`. Цель — закрепить сбор именованных аргументов и фильтрацию ключей словаря. Типичные ошибки: забыть дефолтные значения для контролов, мутировать исходный словарь `params`, вернуть `endpoint` в обеих секциях.

### Пример входных и выходных данных

```python
print(prepare_request(endpoint="/stats", data=[1, 2]))
# output:
# {
#     "endpoint": "/stats",
#     "control": {"timeout": 5, "retries": 3},
#     "payload": {"data": [1, 2]}
# }

print(prepare_request(endpoint="/sync", timeout=10, retries=0, mode="fast"))
# контрольные параметры переопределены
```

- Подсказки: для фильтрации словаря удобно использовать словарное включение. Проверку на наличие ключа делайте перед чтением `params["endpoint"]`, чтобы не получить `KeyError`.

### Критерии проверки и ограничения
1. При отсутствии `endpoint` функция выбрасывает `ValueError("endpoint is required")`.
2. Значения `timeout` и `retries` по умолчанию равны 5 и 3 соответственно.
3. В `payload` не должно быть ключей `endpoint`, `timeout`, `retries`.
4. Исходный `params` не модифицируется (проверяем через повторный вызов с тем же словарем).

### Решение задачи (псевдокод)
1. Если обязательный ключ отсутствует, сгенерировать ошибку и завершить работу.
2. Считать служебные значения: взять `timeout`, `retries` из параметров либо использовать значения по умолчанию.
3. Создать новый словарь для полезной нагрузки, включив туда все пары ключ-значение, кроме служебных.
4. Сформировать итоговую структуру с ключами `endpoint`, `control`, `payload`.
5. Вернуть структуру.

### Рекомендации
- Вынести в отдельную функцию: `split_control_params(params)` — пригодится для повторного использования фильтрации ключей.
- PEP8: выровняйте многострочные литералы словарей и избегайте пробелов вокруг скобок в вызовах функций.
